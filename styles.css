/* =========================================================
   Nexus Finance — styles.css
   Tema oscuro elegante negro/dorado
   ========================================================= */

/* ------------------ Variables de tema ------------------ */
:root{
  --primary: #0B0D10;   /* fondo */
  --primary-2: #0E1116; /* variación */
  --surface: #12151B;   /* tarjetas */
  --surface-2:#141923;  /* tarjetas 2 */
  --border: rgba(255,255,255,0.06);
  --border-strong: rgba(199,162,75,0.45);
  --text:   #F2F3F5;
  --text-dim:#B7BCC7;
  --muted:  #8A90A0;
  --accent: #C7A24B;
  --accent-2:#FFD991;

  --radius: 12px;
  --radius-sm: 10px;
  --shadow: 0 8px 24px rgba(0,0,0,0.35);
  --shadow-sm: 0 2px 6px rgba(0,0,0,0.35);

  --sidebar-w: 280px;

  --font: "Inter", "Segoe UI", Roboto, system-ui, -apple-system, Arial, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
}

/* ------------------ Reset & base ------------------ */
*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; padding:0; }
html{ scroll-behavior: smooth; }
body{
  margin:0;
  font-family: var(--font);
  color: var(--text);
  background: radial-gradient(1200px 800px at -10% -10%, #0f1420 0%, #0c1017 45%, var(--primary) 100%);
  line-height:1.45;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* iOS: evitar zoom loco en inputs */
@supports (-webkit-touch-callout: none) {
  input, select, textarea {
    font-size: 16px;
  }
}

/* ------------------ Utilidades layout ------------------ */
.main{
  margin-left: var(--sidebar-w);
  min-height: 100vh;
  padding: 16px 18px 48px;
}
.grow{ flex:1; }
.row{ display:flex; align-items:center; }
.row.between{ justify-content:space-between; }
.row.center{ justify-content:center; }
.row.g{ gap:10px; }
.grid{ display:grid; grid-template-columns: repeat(auto-fit,minmax(240px,1fr)); gap:14px; }
.grid2{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px; }
.grid3{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:12px; }
.full{ grid-column:1 / -1; }
.center{ text-align:center; }
.right{ text-align:right; }
.muted{ color: var(--muted); }

/* ------------------ Sidebar ------------------ */
.sidebar{
  position: fixed;
  inset:0 auto 0 0;
  width: var(--sidebar-w);
  background: linear-gradient(180deg, #0e1117 0%, #0b0d10 100%);
  border-right: 1px solid var(--border);
  box-shadow: var(--shadow);
  padding: 14px 12px;
  z-index: 20;

  display:flex;
  flex-direction:column;
  overflow: hidden;
}
.brand{
  display:flex; align-items:center; gap:10px;
  padding: 10px; border:1px solid var(--border); border-radius: var(--radius);
  background: linear-gradient(180deg, #10141c, #0e1218);
}
.brand img{
  width:42px; height:42px; object-fit:contain; border-radius:10px;
  background:#0b0d10; border:1px solid var(--border);
}
.brand-info strong{ color:#fff; }

.menu{
  margin-top:12px; display:flex; flex-direction:column; gap:8px;
  flex: 1 1 auto;
  overflow-y: auto;
  padding-right: 6px;
}
.menu::-webkit-scrollbar{ width: 8px; }
.menu::-webkit-scrollbar-track{ background: #0c1016; border-radius: 8px; }
.menu::-webkit-scrollbar-thumb{ background: rgba(199,162,75,0.35); border-radius: 8px; }
.menu::-webkit-scrollbar-thumb:hover{ background: rgba(199,162,75,0.5); }

.nav-btn{
  width:100%;
  text-align:left;
  background: #0f131a;
  border:1px solid var(--border);
  color:#e8ecf2;
  padding:10px 12px;
  border-radius: 10px;
  cursor:pointer;
  transition: all .18s ease;
}
.nav-btn:hover{
  border-color: rgba(199,162,75,0.35);
  box-shadow: inset 0 0 0 1px rgba(199,162,75,0.25);
}
.nav-btn.active{
  background: linear-gradient(180deg, rgba(199,162,75,0.18), rgba(199,162,75,0.08));
  border-color: var(--border-strong);
  color:#fff;
}

/* Sidebar móvil / botón menú */
#menuToggle{ display:none; }

/* ------------------ Topbar ------------------ */
.topbar{
  position: sticky; top:0; z-index:10;
  display:flex; align-items:center; gap:8px;
  padding: 10px 12px;
  margin-bottom: 12px;
  background: rgba(14,17,23,0.7);
  backdrop-filter: blur(8px);
  border: 1px solid var(--border);
  border-radius: var(--radius);
}

/* ------------------ Tarjetas ------------------ */
.card{
  background: linear-gradient(180deg, var(--surface) 0%, var(--surface-2) 100%);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  padding: 12px;
}
.card-title{
  font-weight:700;
  color: #f0d28b;
  margin-bottom:10px;
}

/* ------------------ Botones ------------------ */
.btn, .btn-outline{
  appearance: none; border:1px solid transparent;
  padding:10px 12px; border-radius:10px; cursor:pointer;
  font-weight:600; letter-spacing:.2px;
  transition: all .2s ease;
}
.btn{
  background: linear-gradient(180deg, #caa952, #b58c2f);
  color:#101214;
  border-color: rgba(255,227,150,0.35);
}
.btn:hover{ filter: brightness(1.05); transform: translateY(-1px); }
.btn:active{ transform: translateY(0); }

.btn-outline{
  background: #11151c;
  color:#e6e6e6;
  border-color: var(--border);
}
.btn-outline:hover{
  border-color: var(--border-strong);
  box-shadow: inset 0 0 0 1px rgba(199,162,75,0.25);
}

/* Accesibilidad foco */
.btn:focus, .btn-outline:focus, .nav-btn:focus,
input:focus, select:focus, textarea:focus{
  outline: 2px solid rgba(199,162,75,0.45);
  outline-offset: 2px;
}

/* ------------------ Formularios ------------------ */
label{
  font-size:.92rem; color:#d9dee7;
  display:flex; flex-direction:column; gap:6px;
}
input, select, textarea{
  background: #0f141c;
  color: #e6e8ed;
  border:1px solid var(--border);
  border-radius: 10px;
  padding:10px 10px;
  font-size: .95rem;
  transition: border-color .15s ease, box-shadow .15s ease;
}
input::placeholder, textarea::placeholder{ color:#7b8394; }
input:focus, select:focus, textarea:focus{
  border-color: rgba(199,162,75,0.45);
  box-shadow: 0 0 0 2px rgba(199,162,75,0.12);
}

/* Inputs de archivo como botón */
label.btn-outline input[type="file"]{ display:none; }

/* ------------------ Tablas ------------------ */
table{ width:100%; border-collapse: collapse; }
table.data thead th{
  background: #0f131a;
  color:#e9edf4;
  border-bottom:1px solid var(--border);
  text-align:left;
  padding:10px 12px;
  font-size:.9rem;
}
table.data tbody td{
  border-bottom:1px dashed rgba(255,255,255,0.07);
  padding:10px 12px;
  color:#dfe4ee;
  vertical-align: top;
  font-size:.95rem;
}
table.data tbody tr:hover{
  background: rgba(199,162,75,0.06);
}
.row-actions{ white-space: nowrap; }
.row-actions .btn-outline{ padding:6px 8px; font-size:.85rem; }

/* Alinear columnas monetarias a la derecha */
#expensesTable th:nth-child(5), #expensesTable td:nth-child(5),
#incomesTable  th:nth-child(4), #incomesTable  td:nth-child(4),
#paymentsTable th:nth-child(4), #paymentsTable td:nth-child(4),
#personalTable th:nth-child(4), #personalTable td:nth-child(4),
#reconTable    th:nth-child(2), #reconTable    td:nth-child(2),
#reconTable    th:nth-child(3), #reconTable    td:nth-child(3),
#reconTable    th:nth-child(4), #reconTable    td:nth-child(4),
#invoicesTable th:nth-child(4), #invoicesTable td:nth-child(4),
#quotesTable   th:nth-child(4), #quotesTable   td:nth-child(4){
  text-align: right;
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum" 1, "lnum" 1;
}

/* Ajuste por columna Ref añadida en tablas */
#expensesTable th:nth-child(6), #expensesTable td:nth-child(6),
#incomesTable  th:nth-child(5), #incomesTable  td:nth-child(5){
  text-align: right;
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum" 1, "lnum" 1;
}

/* ------------------ KPI y números ------------------ */
.kpi{
  font-size:1.6rem;
  font-weight:800;
  color:#fff;
  background: #0f131a;
  border:1px solid rgba(255,255,255,0.05);
  border-radius: 14px;
  padding: 14px;
  text-align:right;
  box-shadow: var(--shadow-sm);
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum" 1, "lnum" 1;
}
.num, .num *{
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum" 1, "lnum" 1;
  letter-spacing: .1px;
  text-align: right;
}

/* ------------------ Píldoras / Totales por categoría ------------------ */
.pills,
#expSumPills,
#incSumMethods{
  display:flex;
  flex-wrap: wrap;
  gap:8px;
  margin-top:6px;
}
.pills span,
#expSumPills span,
#incSumMethods span{
  flex: 0 1 180px;
  display:flex; align-items:center; justify-content:space-between; gap:6px;
  background: rgba(199,162,75,0.12);
  border: 1px solid rgba(199,162,75,0.45);
  border-radius: 9px;
  padding:6px 8px;
  color:#eaeaea;
  box-shadow: var(--shadow-sm);
  font-size:.86rem;
}
.pills span .value,
#expSumPills span .value,
#incSumMethods span .value{
  color: var(--accent-2);
  font-weight:700;
  font-size:.9rem;
}

/* Tarjetas de totales compactas */
.stats-wrap{
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap: wrap;
}
.stat-card{
  background: #111218;
  border:1px solid rgba(199,162,75,0.35);
  border-radius: 12px;
  padding: 8px 10px;
  box-shadow: var(--shadow-sm);
  display:flex; align-items:center; justify-content:space-between; gap:10px;
}
.stat-card .label{ color:#cfcfcf; font-size:.92rem; }
.stat-card .value{ color: var(--accent-2); font-weight:700; }

/* ------------------ Login pantalla completa (overlay centrado) ------------------ */
#login.fullscreen-login.view{
  position: fixed;
  inset:0;
  background:
    radial-gradient(900px 600px at 10% -10%, rgba(199,162,75,0.12), transparent 50%),
    radial-gradient(1200px 800px at 100% 0%, rgba(199,162,75,0.08), transparent 50%),
    linear-gradient(180deg,#0a0d12 0%, #070a0f 100%);
  display:none;               /* se muestra solo con .visible */
  z-index: 9999;
  padding: 24px;
  gap: 24px;
}
#login.fullscreen-login.view.visible{
  display:flex;
  flex-direction: column;
  align-items:center;
  justify-content:center;
}
.login-hero{
  text-align:center;
  max-width: 420px;
}
.hero-logo{
  width:72px; height:72px; object-fit:contain;
  border:1px solid var(--border); border-radius: 16px; background:#0b0d10; margin-bottom:8px;
}
.hero-title{
  margin:0; font-size: 2rem; color:#fff; letter-spacing:.3px;
}
.hero-subtitle{
  margin:6px 0 0; color:#cfcfcf;
}

.login-wrap{ width:min(560px, 92vw); }
.login-card{
  background: linear-gradient(180deg,#0f131a, #0b0d10);
  border:1px solid var(--border-strong);
  border-radius: 16px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.55), inset 0 0 0 1px rgba(199,162,75,0.08);
  padding-bottom: 4px;
}
.login-card h2{ margin:10px 0 4px; color:#fff; text-align:center; }
.login-card p{ color:#cfcfcf; text-align:center; }

/* ------------------ Vistas SPA ------------------ */
.view{
  display:none;
}
.view.visible{
  display:block;
}

/* ------------------ Toasts ------------------ */
.toasts{
  position: fixed; right:16px; bottom:16px; z-index:60;
  display:flex; flex-direction:column; gap:8px;
}
.toast{
  background: #101419;
  color:#f6f7fb;
  border:1px solid rgba(199,162,75,0.35);
  padding:10px 12px;
  border-radius:10px;
  box-shadow: var(--shadow-sm);
  transition: opacity .25s ease, transform .25s ease;
}

/* ------------------ Switch simple ------------------ */
.switch{
  position:relative; display:inline-flex; align-items:center; gap:8px; cursor:pointer;
}
.switch input{ display:none; }
.switch span{
  position:relative; width:44px; height:24px; border-radius:999px;
  background:#1a1f28; border:1px solid var(--border);
  display:inline-block;
}
.switch span::after{
  content:""; position:absolute; top:2px; left:2px;
  width:18px; height:18px; border-radius:50%;
  background:#cfd6e3; transition: all .2s ease;
}
.switch input:checked + span{
  background: linear-gradient(180deg, #caa952, #b58c2f);
  border-color: rgba(255,227,150,0.35);
}
.switch input:checked + span::after{ transform: translateX(20px); background:#101214; }

/* ------------------ Canvas simple ------------------ */
#chart12{
  width:100%; height:auto; display:block;
  background:#0f131a; border:1px solid var(--border); border-radius: 12px;
  padding:8px;
}

/* ------------------ Logo preview ------------------ */
.logo-preview{
  width:96px; height:96px; object-fit:contain;
  border:1px solid var(--border); border-radius: 12px; background:#0b0d10;
}

/* ------------------ Totales bloques alinear ------------------ */
.totals{ display:flex; flex-wrap:wrap; gap:12px; align-items:center; margin-top:8px; }
.totals.right{ justify-content:flex-end; }
.header-inline{
  display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap: wrap;
}

/* ------------------ Conciliación bancaria (matching arriba) ------------------ */
#reconciliations .card { display:flex; flex-direction:column; gap:8px; }
#reconHeader{
  display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap: wrap; margin-bottom:6px;
}
.match-summary{
  display:flex; align-items:center; gap:10px; flex-wrap: wrap;
}
.match-card{
  background: #111218;
  border: 1px solid rgba(199,162,75,0.35);
  border-radius: 10px;
  padding: 8px 10px;
  color: #f8f8f8;
  font-size: 0.9rem;
  font-weight: 600;
  box-shadow: var(--shadow-sm);
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-width: 150px;
}
.match-card .value{
  color: var(--accent-2);
  font-weight:700;
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum" 1, "lnum" 1;
}

/* ------------------ Nómina totales arriba ------------------ */
#payments .card{ display:flex; flex-direction:column; gap:10px; }
#payrollHeader{
  display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap: wrap; margin-bottom:6px;
}
.payroll-summary{
  display:flex; align-items:center; gap:10px; flex-wrap: wrap;
}
.payroll-card{
  background:#111218; border:1px solid rgba(199,162,75,0.35); border-radius:10px;
  padding:8px 10px; color:#f8f8f8; font-size:.9rem; font-weight:600; box-shadow: var(--shadow-sm);
  display:flex; align-items:center; justify-content:space-between; min-width:160px;
}
.payroll-card .value{
  color: var(--accent-2); font-weight:700;
  font-variant-numeric: tabular-nums; font-feature-settings: "tnum" 1, "lnum" 1;
}

/* ------------------ Panel móvil rápido ------------------ */
.mobile-quick-panel{
  display:none; /* solo en móvil */
  padding: 10px 12px 4px;
  background: linear-gradient(180deg,#0f131a,#07090f);
  border-bottom:1px solid var(--border);
}
.mq-header{
  font-weight:700;
  font-size:1rem;
}
.mq-subtitle{
  font-size:0.85rem;
  color: var(--muted);
  margin-bottom: 8px;
}
.mq-summary{
  display:flex;
  gap:8px;
  overflow-x:auto;
  padding-bottom:6px;
}
.mq-card{
  min-width: 130px;
  background:#11151d;
  border:1px solid rgba(199,162,75,0.35);
  border-radius:10px;
  padding:6px 8px;
  font-size:0.8rem;
}
.mq-card span{
  color: var(--muted);
}
.mq-card strong{
  display:block;
  margin-top:2px;
  color:#fff;
}
.mq-actions{
  display:flex;
  gap:8px;
  margin-top:6px;
}
.mq-actions button{
  flex:1;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid rgba(199,162,75,0.4);
  background:#11151c;
  color:#f2f3f5;
  font-size:0.85rem;
  font-weight:600;
}
.mq-settings-action{
  margin-top: 10px;
  display: flex;
  justify-content: center;
}
.mq-settings-action button{
  padding: 8px 14px;
  border-radius: 999px;
  border: 1px solid rgba(199,162,75,0.5);
  background: #0f131a;
  color: #f2f3f5;
  font-size: 0.85rem;
  font-weight: 600;
  letter-spacing: .2px;
}

/* ------------------ Responsive grids ------------------ */
@media (max-width: 1080px){
  .grid3{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width: 720px){
  .grid2, .grid3{ grid-template-columns: 1fr; }
  .topbar{ position: sticky; top:6px; }
}

/* =========================================================
   MODO MÓVIL GENERAL
   ========================================================= */
@media (max-width: 768px){

  body{
    overflow-x: hidden;
  }

  /* Panel móvil visible solo en móvil */
  .mobile-quick-panel{
    display:block;
  }

  /* Sidebar oculta en móvil */
  .sidebar{
    display:none;
  }

  /* Main a ancho completo en móvil */
  .main{
    margin-left:0;
    padding: 10px 10px 40px;
  }

  /* Ocultar botón hamburguesa (no lo necesitas aquí) */
  #menuToggle{
    display:none !important;
  }

  /* Tablas en general más compactas */
  table.data{
    width:100%;
  }
  table.data th,
  table.data td{
    padding:6px 6px;
    font-size:0.8rem;
  }
}

/* =========================================================
   FACTURA / COTIZACIÓN: MODO MÓVIL COMO "CARDS"
   ========================================================= */
@media (max-width: 768px){

  #invoices,
  #quotes{
    overflow-x:hidden;
  }

  #invItemsTable,
  #quoItemsTable{
    display:block;
    width:100%;
    border-collapse:separate;
    border-spacing:0;
    overflow-x:visible;
  }

  #invItemsTable thead,
  #quoItemsTable thead{
    display:none;
  }

  #invItemsTable tbody,
  #quoItemsTable tbody{
    display:block;
    width:100%;
  }

  #invItemsTable tr,
  #quoItemsTable tr{
    display:block;
    margin-bottom:10px;
    padding:8px 10px;
    background:#0f131a;
    border:1px solid var(--border);
    border-radius:10px;
    box-shadow: var(--shadow-sm);
  }

  #invItemsTable td,
  #quoItemsTable td{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:6px;
    padding:4px 0;
    font-size:0.8rem;
    white-space:normal;
  }

  #invItemsTable td::before,
  #quoItemsTable td::before{
    font-weight:600;
    color:var(--text-dim);
    margin-right:6px;
    flex:0 0 auto;
    font-size:0.78rem;
  }

  /* FACTURA */
  #invItemsTable td:nth-child(1)::before{ content:"Descripción"; }
  #invItemsTable td:nth-child(2)::before{ content:"Cant."; }
  #invItemsTable td:nth-child(3)::before{ content:"Precio"; }
  #invItemsTable td:nth-child(4)::before{ content:"Imp %"; }
  #invItemsTable td:nth-child(5)::before{ content:"Importe"; }
  #invItemsTable td:nth-child(6)::before{ content:""; }

  /* COTIZACIÓN */
  #quoItemsTable td:nth-child(1)::before{ content:"Descripción"; }
  #quoItemsTable td:nth-child(2)::before{ content:"Cant."; }
  #quoItemsTable td:nth-child(3)::before{ content:"Precio"; }
  #quoItemsTable td:nth-child(4)::before{ content:"Imp %"; }
  #quoItemsTable td:nth-child(5)::before{ content:"Importe"; }
  #quoItemsTable td:nth-child(6)::before{ content:""; }

  #invItemsTable td input,
  #quoItemsTable td input{
    flex:1 1 auto;
    max-width:60%;
    font-size:0.82rem;
  }

  #invItemsTable td:nth-child(1) input,
  #quoItemsTable td:nth-child(1) input{
    max-width:100%;
    text-align:left;
  }

  #invItemsTable td:nth-child(2) input,
  #invItemsTable td:nth-child(3) input,
  #invItemsTable td:nth-child(4) input,
  #invItemsTable td:nth-child(5) input,
  #quoItemsTable td:nth-child(2) input,
  #quoItemsTable td:nth-child(3) input,
  #quoItemsTable td:nth-child(4) input,
  #quoItemsTable td:nth-child(5) input{
    text-align:right;
  }

  #invItemsTable td:nth-child(6),
  #quoItemsTable td:nth-child(6){
    justify-content:flex-end;
  }
  #invItemsTable td:nth-child(6)::before,
  #quoItemsTable td:nth-child(6)::before{
    content:"";
  }

  #invItemsTable td:nth-child(6) .btn-outline,
  #quoItemsTable td:nth-child(6) .btn-outline{
    padding:4px 8px;
    font-size:0.75rem;
  }

  #invoices .totals,
  #quotes .totals{
    flex-direction:column;
    align-items:flex-end;
    gap:4px;
    font-size:0.8rem;
  }
}

@media (max-width:480px){
  #invItemsTable td,
  #quoItemsTable td{
    font-size:0.75rem;
  }
  #invItemsTable td input,
  #quoItemsTable td input{
    font-size:0.75rem;
  }
}

/* ------------------ Impresión (PDF blanco/negro) ------------------ */
@media print{
  body{ background:#fff; color:#000; }
  .sidebar, .topbar, #toastContainer, #login, .mobile-quick-panel{ display:none !important; }
  .main{ margin:0; padding:0; }
  .card{ border-color:#000; background:#fff; color:#000; box-shadow:none; }
  table.data thead th{ border-bottom:1px solid #000; color:#000; background:#fff; }
  table.data tbody td{ border-bottom:1px dotted #666; color:#000; }
  .btn, .btn-outline{ display:none !important; }
}

/* ------------------ Links / pequeños detalles ------------------ */
small, .small{ color: var(--text-dim); }
a{ color: var(--accent); text-decoration:none; }
a:hover{ text-decoration:underline; }
/* =========================================================
   OVERRIDE PARA DESKTOP: asegurar que las vistas se vean
   ========================================================= */
@media (min-width: 769px){
  .view{
    display: block !important;  /* Fuerza que todas las secciones sean visibles en desktop */
  }
}

