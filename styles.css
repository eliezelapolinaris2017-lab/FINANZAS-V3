/* =========================================================
   Nexus Finance — styles.css (tema oscuro elegante)
   Paleta base:
   --bg: #0b0d10; --panel: #111418; --panel-2: #171B21;
   --border: #1f242c; --accent: #C7A24B; --text: #F2F3F5;
   ========================================================= */

:root{
  --bg: #0b0d10;
  --panel: #111418;
  --panel-2: #171B21;
  --border: #1f242c;
  --accent: #C7A24B;
  --accent-weak: rgba(199,162,75,0.35);
  --text: #F2F3F5;
  --text-weak: #A7AFB9;
  --ok: #34C759;
  --bad: #FF6A6A;
  --warn: #FFC857;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --radius: 12px;
  --radius-sm: 10px;
  --radius-xs: 8px;
  --gap: 14px;
  --gap-lg: 20px;
  --fw-bold: 600;
  --fw-black: 700;
  --font: "Inter", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
}

/* ===== Reset mínimo elegante ===== */
* { box-sizing: border-box; }
html,body{height:100%;}
html{scroll-behavior:smooth;}
body{
  margin:0; background:var(--bg); color:var(--text); font-family:var(--font);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

/* ===== Utilidades ===== */
.g{ gap: var(--gap); }
.grow{ flex:1; }
.center{ text-align:center; }
.right{ text-align:right; }
.row{ display:flex; align-items:center; }
.between{ justify-content:space-between; }
.full{ grid-column:1 / -1; }
.num{ font-variant-numeric: tabular-nums; font-feature-settings: "tnum" 1, "lnum" 1; }
.muted{ color: var(--text-weak); }

/* ===== SPA: solo una vista visible ===== */
.view{ display:none !important; }
.view.visible{ display:block !important; }

/* ===== Layout principal ===== */
.sidebar{
  position:fixed; inset:0 auto 0 0; width:280px; background:linear-gradient(180deg, #0e1116, #0b0d10);
  border-right:1px solid var(--border); padding:18px 14px; z-index:50; overflow:auto;
}
.brand{ display:flex; gap:12px; align-items:center; margin-bottom:16px; }
.brand img{ width:44px; height:44px; border-radius:10px; border:1px solid var(--border); object-fit:cover; background:#0a0d11; }
.brand-info strong{ font-weight:var(--fw-bold); }
.menu{ display:flex; flex-direction:column; gap:8px; padding-top:8px; }

/* Nav buttons */
.nav-btn{
  display:flex; align-items:center; gap:10px;
  width:100%; padding:12px 14px; border-radius: var(--radius-sm);
  background: var(--panel-2); color: var(--text);
  border:1px solid var(--border);
  cursor:pointer; transition:.2s ease;
}
.nav-btn:hover{ border-color:var(--accent); box-shadow:0 0 0 1px var(--accent-weak) inset; }
.nav-btn.active{ background: #141922; border-color: var(--accent); box-shadow: 0 0 0 1px var(--accent-weak) inset; }
.btn-outline.nav-btn{ background: transparent; }

/* Main area */
.main{
  margin-left:280px; min-height:100vh; padding:22px;
}
.topbar{
  position:sticky; top:0; z-index:40;
  display:flex; align-items:center; gap:10px;
  background:linear-gradient(180deg, rgba(17,20,24,.95), rgba(17,20,24,.90));
  backdrop-filter: blur(6px);
  padding:10px 14px; margin:-22px -22px 16px; border-bottom:1px solid var(--border);
}

/* Collapsible sidebar (mobile) */
#menuToggle{ display:none; }
@media (max-width: 1020px){
  .sidebar{ transform: translateX(-100%); transition:.25s ease; }
  .sidebar.open{ transform: translateX(0); }
  #menuToggle{ display:inline-flex; }
  .main{ margin-left:0; padding:18px; }
}

/* ===== Cards / Panels ===== */
.card{
  background: linear-gradient(180deg, #111418, #0f1216);
  border:1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding:16px;
  margin-bottom:16px;
  position:relative;
}
.card:before{
  content:""; position:absolute; inset:0; pointer-events:none; border-radius:inherit;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
}
.card-title{
  font-weight: var(--fw-bold); letter-spacing:.2px; margin-bottom:10px;
}

/* KPI */
.kpi{
  font-size: 32px; font-weight: var(--fw-black);
  padding: 4px 0 10px;
}

/* Header inline with stats */
.header-inline{
  display:flex; align-items:center; justify-content:space-between; gap:14px; flex-wrap:wrap;
}
.stats-wrap{ display:flex; gap:10px; flex-wrap:wrap; }
.stat-card{
  min-width:160px; padding:10px 12px; border-radius:var(--radius-sm);
  border:1px solid var(--border); background:#0E1217;
}
.stat-card .label{ display:block; font-size:12px; color:var(--text-weak); margin-bottom:4px; }
.stat-card .value{ font-weight:var(--fw-bold); }

/* Pills (subtotales / por método) */
.pills{ display:flex; flex-wrap:wrap; gap:8px; margin-top:10px; }
.pills .pill{
  padding:8px 10px; border-radius:999px; border:1px solid var(--border);
  background:#0E1217; font-size:12px;
}
.pills .pill strong{ margin-left:6px; }

/* ===== Forms ===== */
label{ font-size:13px; color:var(--text-weak); display:flex; flex-direction:column; gap:7px; }
input, select{
  background:#0c0f13; color:var(--text); border:1px solid var(--border);
  border-radius: var(--radius-xs); padding:10px 12px; outline:none; transition:.2s ease;
}
input:focus, select:focus{
  border-color: var(--accent);
  box-shadow: 0 0 0 2px var(--accent-weak);
}
.grid2{ display:grid; grid-template-columns: repeat(2,1fr); gap: var(--gap); }
.grid3{ display:grid; grid-template-columns: repeat(3,1fr); gap: var(--gap); }
@media (max-width: 900px){
  .grid3{ grid-template-columns: 1fr; }
  .grid2{ grid-template-columns: 1fr; }
}

/* Buttons */
.btn, .btn-outline{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:10px 14px; border-radius: var(--radius-sm); cursor:pointer; transition:.2s ease;
  font-weight:var(--fw-bold);
}
.btn{
  background: linear-gradient(180deg, #1d222b, #171c24);
  border:1px solid var(--accent);
  color: var(--text);
  box-shadow: 0 0 0 1px var(--accent-weak) inset, 0 8px 16px rgba(0,0,0,.35);
}
.btn:hover{ filter: brightness(1.05); box-shadow: 0 0 0 1px rgba(199,162,75,.5) inset, 0 10px 20px rgba(0,0,0,.4); }
.btn-outline{
  background: transparent; color: var(--text);
  border:1px solid var(--border);
}
.btn-outline:hover{ border-color: var(--accent); box-shadow: 0 0 0 1px var(--accent-weak) inset; }

/* Row actions en tablas */
.row-actions{ display:flex; gap:8px; justify-content:flex-end; }

/* ===== Tablas ===== */
table{ width:100%; border-collapse: collapse; }
.data thead th{
  text-align:left; font-size:12px; color:var(--text-weak); font-weight:var(--fw-bold);
  padding:10px; background:#0e1318; border-bottom:1px solid var(--border);
  position:sticky; top:0; z-index:1;
}
.data tbody td{
  padding:10px; border-bottom:1px solid #141922; background:#0c1015;
}
.data tbody tr:nth-child(2n) td{ background:#0b0f14; }
.data tbody tr:hover td{ background:#111722; }
.data .num{ text-align:right; }

/* Ajuste de columnas de monto tras agregar Ref */
#expensesTable th:nth-child(6), #expensesTable td:nth-child(6),
#incomesTable  th:nth-child(5), #incomesTable  td:nth-child(5){
  text-align:right;
}

/* ===== Login fullscreen ===== */
.fullscreen-login.view{ display:none !important; }
.fullscreen-login.view.visible{
  display:flex !important; min-height:100vh;
  align-items:center; justify-content:center; padding:20px;
  background:
    radial-gradient(800px 400px at 20% 10%, rgba(199,162,75,.08), transparent 60%),
    radial-gradient(800px 400px at 80% 90%, rgba(199,162,75,.06), transparent 60%),
    linear-gradient(180deg, rgba(9,11,14,.85), rgba(9,11,14,.95));
}
.login-hero{ display:flex; flex-direction:column; align-items:center; gap:10px; margin-bottom:16px; }
.hero-logo{ width:84px; height:84px; object-fit:contain; filter: drop-shadow(0 0 12px rgba(199,162,75,.4)); }
.hero-title{ margin:6px 0 0; font-weight:800; letter-spacing:.3px; }
.hero-subtitle{ margin:0; color:var(--text-weak); }

.login-wrap{ width:100%; max-width:520px; }
.login-card{
  background: linear-gradient(180deg, #0f1318, #0d1116);
  border:1px solid var(--border); box-shadow: var(--shadow);
}

/* ===== Dashboard ===== */
.grid{
  display:grid; grid-template-columns: repeat(3,1fr); gap: var(--gap);
}
@media (max-width:1100px){ .grid{ grid-template-columns: repeat(2,1fr);} }
@media (max-width:760px){ .grid{ grid-template-columns: 1fr;} }

/* ===== Match / Payroll summaries ===== */
.match-summary, .payroll-summary{
  display:flex; gap:10px; flex-wrap:wrap;
}
.match-card, .payroll-card{
  min-width:160px; padding:10px 12px; border-radius: var(--radius-sm);
  border:1px solid var(--border); background:#0E1217;
}
.match-card .value, .payroll-card .value{ font-weight:var(--fw-bold); }

/* ===== Budget bars ===== */
.budget-bars{ display:flex; flex-direction:column; gap:10px; }
.budget-bars .bar{
  display:flex; align-items:center; gap:10px;
}
.budget-bars .bar .track{
  flex:1; height:10px; border-radius:999px; background:#0e141a; border:1px solid var(--border); overflow:hidden;
}
.budget-bars .bar .fill{
  height:100%; background: linear-gradient(90deg, rgba(199,162,75,.9), rgba(199,162,75,.4));
}

/* ===== Uploader / logo preview ===== */
.uploader{ display:flex; align-items:center; justify-content:space-between; }
.logo-preview{
  width:72px; height:72px; object-fit:contain; border-radius:10px;
  border:1px solid var(--border); background:#0a0d11; padding:6px;
}

/* ===== Switch (AutoSync) ===== */
.switch{ position:relative; display:inline-flex; align-items:center; gap:8px; cursor:pointer; }
.switch input{ display:none; }
.switch span{
  display:inline-block; width:44px; height:24px; border-radius:999px; background:#0f141a; border:1px solid var(--border); position:relative;
}
.switch span:after{
  content:""; position:absolute; top:2px; left:2px; width:18px; height:18px; border-radius:50%;
  background:#222831; transition:.2s ease;
}
.switch input:checked + span{ border-color: var(--accent); box-shadow: inset 0 0 0 1px var(--accent-weak); }
.switch input:checked + span:after{ left:22px; background:#2a313a; }

/* ===== Toasts ===== */
.toasts{ position:fixed; right:16px; bottom:16px; display:flex; flex-direction:column; gap:10px; z-index:999; }
.toast{
  background:#0E1217; border:1px solid var(--border); color:var(--text);
  padding:12px 14px; border-radius: var(--radius-sm); box-shadow: var(--shadow);
  animation: toastIn .24s ease both;
}
@keyframes toastIn{ from{ transform:translateY(8px); opacity:0 } to{ transform:translateY(0); opacity:1 } }

/* ===== Impresión (PDF limpio B/N) ===== */
@media print{
  @page{ size:A4; margin:14mm; }
  body{ background:#fff; color:#000; }
  .sidebar, .topbar, #menuToggle, .btn, .btn-outline, .nav-btn, .toasts{ display:none !important; }
  .card{ box-shadow:none; background:#fff; border:1px solid #000; }
  .data thead th, .data tbody td{ background:#fff !important; color:#000 !important; border-color:#000 !important; }
  .stat-card, .match-card, .payroll-card{ border-color:#000 !important; background:#fff !important; }
  .pills .pill{ border-color:#000 !important; background:#fff !important; }
  /* mostrar solo la sección visible como página */
  .view{ display:none !important; }
  .view.visible{ display:block !important; }
}

/* ===== Accesibilidad menores ===== */
button{ color:inherit; }
button:focus-visible, input:focus-visible, select:focus-visible{
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}
